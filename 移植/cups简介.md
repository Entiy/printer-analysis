###cups简介
cups是一个类UNIX操作系统的组合式印刷系统，它允许一台电脑作为打印服务器，其会接受打印需求并将需要打印的各种格式的文件经过一系列的格式转换从而传递给打印机进行打印。cups包括了前端接收打印命令的相关程序，后端控制打印机硬件的程序，中间则是一些打印的驱动(一系列程序与定义文件的总和，而不是指单一文件)。
cups支持多种打印方式包括本地打印方式(本地并口、串口、USB)、远程打印方式、网络打印方式。
基本上现在的Linux系统在安装后都会自带cups，我所装的ubuntu以及centos就是这样，经过安装后，可以在```/etc/init.d/```中找到名为cups的可执行文件，用于开启(start)或关闭(stop)cups服务。位于```/etc/cups/```下的cupsd.conf文件中可以添加监听的端口，默认为本机的631端口，在网页中输入localhost:631或者127.0.0.1:631即可打开cups的管理栏，可以在其中配置自己的打印机。
###cups打印流程
当cups收到一个打印的命令时，其执行顺序是首先将此需要打印的数据进行格式的转换，将其转换为PostScript格式的数据，打印在Unix世界的演化中总是围绕着PostScript页面描述语言展开，这里我了解到在cups内部还会对其PostScript格式的数据进行进一步的转换，输出仍然是PostScript格式的数据，具体两者的差别不清楚，之后在cups对其有3种处理的形式：
######1.将PostScript格式的文件直接传给打印机：
此种情况下的打印机价格比较高，因此支持的类型比较少，不过这样免除了PC内部的一些工作。
######2.将PostScript格式转换为raster格式：
raster格式是cups内部的文件格式，这是cups为了让打印的格式统一而设计的一种方式，即打印机开发商们只要开发raster格式到各自打印机的接口就能够打印，在```/usr/lib/cups/filter```目录中可以找到，例如rastertohp、rastertolabel等文件名的文件即针对raster格式文件的专门的过滤器。不过这种方式支持的打印机仍然不多。
######3.将PostScript数据传给GhostScript：
这里的GhostScript是linux中运行的一个程序，实际上此方式与第2种方式的道理相同，第2种是用cups内部的过滤器翻译成raster格式，而此种方式则是使用GhostScript程序进行翻译，因其支持的打印机较多，所以使用此种方式进行打印的最多

从以上的cups的工作流程来看，实际上cups在做的事就是将各种格式的文件经由各种过滤器(filter)翻译成打印机所懂得语言，然后传输给打印机将其打印出来


###PPD文件
PPD文件(PostScript Printer Description)是cups中的驱动文件，这是用于PostScript打印机的标准文件，它是cups中打印驱动的核心，当我们使用一种打印机时，就需要有其对应的PPD文件才能对其进行识别，此文件中记录了打印机的一些具体信息、打印时的具体参数、例如页面参数、用什么filter转换等等，cups中所连接过的打印机对应的ppd文件都在/etc/cups/ppd/目录下，对于没有连接过打印机的PC来说是空目录，而在```/usr/share/cups/model```目录下本来应该存有ppd文件的模板，当配置一台新的打印机时可以指定自己需要的对应模板进而创建具体ppd文件，但是实际查看中两者都为空，因此判断可能ppd文件是在连接打印机时下载得到的。

###cups配置目录记录
```/etc/cups/```：cups配置目录。```cupsd.conf```记录了配置信息，可在其中添加监听地址。```printers.conf```记录了系统中已配置的打印机信息。
```/etc/cups/ppd/```：所有已配置打印机的ppd驱动文件。
```/usr/lib/cups/backend/```：目录下为可执行文件，用于接收转换后的Postscript，在打印过程中，由其打开具体的设备端口，目录下包含了usb、ipp等可执行文件
```/usr/lib/cups/filter/```：存有所有过滤器，是cups的重要组件。
```/usr/share/cups/model/```：存放ppd文件的模板，当新配置一个打印机时只需将对应的模板放于此目录中则能识别。
